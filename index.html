<!DOCTYPE html>
<html lang  ="pt">
    <head>
        <meta charset=UTF-8>    
        <title>Mancala</title> 
        <link rel = "stylesheet" href="styles.css">
        <link rel = "stylesheet" href="https://fonts.googleapis.com/css?family=Yeon Sung|Sarabun">

        <script>

            function enable_disable_computer_lvl(val){
                const form = document.getElementById("1")
                form.disabled = val;
                const form1 = document.getElementById("2")
                form1.disabled = val;
                const form2 = document.getElementById("3")
                form2.disabled = val;
                const form3 = document.getElementById("4")
                form3.disabled = val;
                const form4 = document.getElementById("5")
                form4.disabled = val;
            }

            function versus_player(){
                const button = document.getElementById("vs_player")
                button.style.background = '#ffffff';
                const button3 = document.getElementById("vs_computer")
                button3.style.background = '#ccccc9';
                const button1 = document.getElementById("1player")
                button1.disabled = true;
                const button2 = document.getElementById("1computer")
                button2.disabled = true;
                enable_disable_computer_lvl(true);
            }

            function versus_computer(){
                const button = document.getElementById("vs_computer")
                button.style.background = '#ffffff';
                const button3 = document.getElementById("vs_player")
                button3.style.background = '#ccccc9';
                const button1 = document.getElementById("1player")
                button1.disabled = false;
                const button2 = document.getElementById("1computer")
                button2.disabled = false;
                enable_disable_computer_lvl(false);
            }
            
            function p1_player(){
                const button = document.getElementById("1player")
                button.style.background = '#ffffff';
                const button3 = document.getElementById("1computer")
                button3.style.background = '#ccccc9';
            }

            function p1_computer(){
                const button = document.getElementById("1computer")
                button.style.background = '#ffffff';
                const button3 = document.getElementById("1player")
                button3.style.background = '#ccccc9';
            }

            function giveUp(){
                const button = document.getElementById("begin")
                button.disabled = false;
                const button_give_up = document.getElementById("give_up")
                button_give_up.disabled = true;
                const drop_down1 = document.getElementById("cavidades")
                drop_down1.disabled = false;
                const drop_down2 = document.getElementById("sementes")
                drop_down2.disabled = false;
                const button1 = document.getElementById("1player")
                button1.disabled = false;
                const button2 = document.getElementById("1computer")
                button2.disabled = false;
                enable_disable_computer_lvl(false);
                const button4 = document.getElementById("vs_computer")
                button4.disabled = false;
                const button5 = document.getElementById("vs_player")
                button5.disabled = false;
            }

            function getFormResult(id){
                const element = document.getElementById(id);
                return element.options[element.selectedIndex].value;
            }

            function stylizeSeeds(elem, seedNum){
                let angle = Math.random()*360;
                elem.style.display = "inline-block";
                elem.style.transform = `rotate(${angle}deg)`; 
                elem.style.width = "15%";
                elem.style.boxSizing = "border-box";

                elem.style.margin = "8%";
                elem.style.color = "transparent"
                elem.style.backgroundColor = "#bbb";
                elem.style.borderRadius ="50%";
            }

            function stylizeBoard(board){
                board.style.margin = "3% 15%";
            }

            function removeElements(id){
                let elem = document.getElementById(id);
                while(elem != null){
                    elem.remove();
                    elem = document.getElementById(id);
                }
            }
            
            function stylizeCell(cell, wd){
                cell.style.width = wd +"%";
                cell.style.boxSizing = "border-box";
                cell.style.border = "1px solid black";
            }

            function stylizeRow(row){
                row.style.display = "flex";
                row.style.justifyContent = "space-around";
                row.style.boxSizing = "border-box";
            }

            function insertRow(board, cavityNum, seedNum){
                let wd = 100/parseInt(cavityNum);
                const row = document.createElement("DIV");
                row.className = "flex-container";
                stylizeRow(row);
                for (let i = 0; i < cavityNum; i++){
                    const cell = document.createElement("DIV");
                    for (let j = 0; j < seedNum; j++){
                        const seed = document.createElement("DIV");
                        const t = document.createTextNode("S ");
                        stylizeSeeds(seed);
                        seed.appendChild(t);
                        cell.appendChild(seed);
                    }
                    stylizeCell(cell,wd);
                    row.appendChild(cell);
                }
                return row;
            }

            function createBoard(){
                const board = document.createElement("DIV");
                const cavityNumber = getFormResult("cavidades");
                const seedNumber = getFormResult("sementes");
            
                board.id = "board";

                removeElements("board");

                board.appendChild(insertRow(board, cavityNumber, seedNumber));
                board.appendChild(insertRow(board, cavityNumber, seedNumber));
                document.getElementById("right_container").appendChild(board);
                stylizeBoard(board);

            }

            function begin(){
                const button = document.getElementById("begin")
                button.disabled = true;
                const button_give_up = document.getElementById("give_up")
                button_give_up.disabled = false;
                const drop_down1 = document.getElementById("cavidades")
                drop_down1.disabled = true;
                const drop_down2 = document.getElementById("sementes")
                drop_down2.disabled = true;
                enable_disable_computer_lvl(true);
                const button1 = document.getElementById("1player")
                button1.disabled = true;
                const button2 = document.getElementById("1computer")
                button2.disabled = true;
                const button4 = document.getElementById("vs_computer")
                button4.disabled = true;
                const button5 = document.getElementById("vs_player")
                button5.disabled = true;
            }

        </script>
    </head>
    <body onload="createBoard(), giveUp()">
        <div class="pop_up">
            <div id="instructions">
                <a href ="#"><button type="button">X</button></a>

                <h1 class="center_elem">Regras:</h1>
                <b class="rules_section">Tabuleiro</b>
                <img src="tabuleiro1.png" alt="Tabuleiro de Mancala vazio">
                <ul></ul>
                <li>2 conjuntos de cavidades centrais alinhadas</li>
                <li>Ladeados por 2 armazéns — cavidades maiores</li>
                <li>Cada jogador controla as cavidades do seu lado …</li>
                <li>… bem como o armazém que fica à sua direita</li>
                <p></p>
                <b class="rules_section">Peças</b>
                <img src="pecas.png" alt="Peças de Mancala">
                <ul></ul>
                <li>As peças denominam-se sementes</li>
                <li>Representáveis visualmente como discos ou elipses</li>
                <li>Devem ser dispostas dentro das cavidades</li>
                <li>Desafio extra: evitar uma disposição excessivamente regular</li>
                <p></p>
                <b class="rules_section">Início do jogo</b>
                <img src="inicio.png" alt="Peças de Mancala">
                <ul></ul>
                <li>Os armazéns estão vazios (sem sementes)</li>
                <li>As restantes cavidades têm o mesmo número de sementes</li>
                <p></p>
                <b class="rules_section">Forma de jogar</b>
                <img src="inicio.png" alt="Peças de Mancala">
                <ul></ul>
                <li>Jogadores semeiam as suas sementes alternadamente</li>
                <li>Na sua vez semeiam a partir de uma das suas cavidades</li>
                <li>Consoante a situação da última semente semeada, podem</li>
                    <dd>- voltar a jogar</dd>
                    <dd>- ficar com algumas sementes do adversário</dd>
                <li>Termina quando um dos jogadores fica sem sementes</li>
                <p></p>
                <b class="rules_section">Começar a semear</b>
                <img src="semear.png" alt="Peças de Mancala">
                <ul></ul>
                <li>Escolher uma cavidade do seu lado (que não o armazém)</li>
                <li>Recolher todas as N sementes dessa cavidade</li>
                <li>Colocar 1 semente nas N cavidade seguintes</li>
                <li>A semeadura é feita no sentido anti-horário</li>
                <p></p>
                <b class="rules_section">Continuar a semear</b>
                <img src="semear2.png" alt="Peças de Mancala">
                <ul></ul>
                <li>Se a cavidade seguinte for o seu armazém, semear também</li>
                <li>Sobrando sementes, continuar no lado do adversário</li>
                <li>Se atingir o armazém do adversário, não semear</li>
                <li>Mas depois continuar do seu lado, se ainda tiver sementes</li>
                <p></p>
                <b class="rules_section">Última semente em armazem</b>
                <img src="ultimo.png" alt="Peças de Mancala">
                Volta a jogar se a <b>última</b> semente for semeada for no seu próprio <b>armazém</b>
                <p>Semeando cavidade agora vazia, a última semente cai no armazém e volta a jogar</p>
                <p></p>
                <b class="rules_section">Última semente em cavidade vazia</b>
                <img src="ultima semente.png" alt="Peças de Mancala">
                Se a <b>última</b> semente calhar numa <b>sua</b> cavidade <b>vazia</b>, transferir para o seu armazém as sementes
                <ul></ul>
                <li>na cavidade <b>oposta</b>, do adversário</li>
                <li>assim como essa última semente semeada</li>
                <p></p>
                <i>Semeando a partir da 3ª cavidade a contar da esquerda acrescenta 6 + 1 sementes ao seu armazém</i>
                <p></p>
                <b class="rules_section">Terminar</b>
                <img src="terminar.png" alt="Peças de Mancala">
                <ul></ul>
                <li>Jogo termina quando um dos jogadores não pode jogar</li>
                <li>… porque todas as suas cavidades estão vazias</li>
                <li>O outro jogador recolhe sementes nas suas cavidades …</li>
                <li>… que são colocadas no seu armazém</li>
                <li>Ganha jogador cujo armazém tem mais sementes</li>
            </div>
            
        </div>
        <div class="pop_up">
            <div id="classificacao">
                <a href="#"><button type="button">X</button></a>
                <h1 class="center_elem">Highscores:</h1>
            </div>
        </div>
        <div id="logo" class="border_bottom">
            <h1>Mancala</h1>
        </div>
        <div id="conteudo">
        <div id="settings" class="border">
            <div class="elem_settings">
                Número de cavidades por lado:
                <select id="cavidades" name="cavidades" size="1" onchange="createBoard()">
                    <option value="6"> 6</option>
                    <option value="7"> 7</option>
                    <option value="8"> 8</option>
                    <option value="9"> 9</option>
                </select>
            </div>
            <div class="elem_settings">
                Número de sementes por cavidade:
                <select id="sementes" name="sementes" size="1" onchange = "createBoard()">
                    <option value="4"> 4</option>
                    <option value="5"> 5</option>
                    <option value="6"> 6</option>
                    <option value="7"> 7</option>
                    <option value="8"> 8</option>
                    <option value="9"> 9</option>
                </select>
            </div>
            <div class="elem_settings center_elem">
                Tipo de Jogo:
                <div>
                    <button type="button" class="left_button medium_button" id = "vs_player" onclick="versus_player()">Vs Jogador</button>
                    <button type="button" class="right_button medium_button" id = "vs_computer" onclick = "versus_computer()"> Vs Computador</button>
                </div>
            </div>
            <div class="elem_settings center_elem">
                1º Jogador:
                <div>
                    <button type="button" class="left_button medium_button" id = "1player" onclick = "p1_player()">Jogador</button>
                    <button type="button" class="right_button medium_button" id = "1computer" onclick = "p1_computer()">Computador</button>
                </div>
            </div>
            <div class="elem_settings">
                Nível do computador:
                <div class="center_elem upper_margin">
                    <label class="radio_button_label" id= "leel">1</label>
                    <label class="radio_button_label">2</label>
                    <label class="radio_button_label">3</label>
                    <label class="radio_button_label">4</label>
                    <label class="radio_button_label">5</label>
                </div>
                <form class="center_elem">
                    <input type="radio" id="1" name="radio_answer" value="1" class="radio_button"> 
                    <input type="radio" id="2" name="radio_answer" value="2" class="radio_button"> 
                    <input type="radio" id="3" name="radio_answer" value="3" class="radio_button"> 
                    <input type="radio" id="4" name="radio_answer" value="4" class="radio_button"> 
                    <input type="radio" id="5" name="radio_answer" value="5" class="radio_button"> 
                </form>
            </div>
            <div class="center_elem">
                <button type="button" class="big_button" id="begin" onclick="begin()">Começar</button>
            </div>
        </div>
        <div id="right_container">
            <div id="commands" class="border">
                <div>
                    <div class="auth">
                        <div>
                            <label for="nome">Nome:</label>
                            <input type="text" id="nome" name="nome" class ="input_auth"><br><br>
                        </div>
                        <div>
                            <label for="password">Password:</label>
                            <input type="password" id="password" name="password" class ="input_auth"><br><br>
                        </div>
                    </div>
                    <div class = "pop_ups">
                        <a href="#instructions"><button type="button" class=" right_button pop_up_buttons">Instruções</button></a>
                        <a href="#classificacao"><button type="button" class=" right_button pop_up_buttons">Classificações</button></a>
                    </div>
                </div>
                <div class="game_controls">
                    <button type="button" class="auth_button game_buttons">Autenticar</button>
                    <button type="button" class=" give_up_button game_buttons" id = "give_up" onclick="giveUp()">Desistir</button>
                </div>
            </div>
        </div>
    </body>
</html>

